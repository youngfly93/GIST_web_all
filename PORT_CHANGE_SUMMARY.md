# 端口更改总结：恢复为 4966

## 🎯 更改目标
将关闭 AI 功能的转录组域名恢复为 `http://127.0.0.1:4966/`

## ✅ 已完成的更改

### 1. 前端配置
**文件**: `frontend/src/pages/Home.tsx`
- **行号**: 253
- **更改**: 恢复为 `'http://127.0.0.1:4966/'`
- **影响**: 转录组学模块在关闭 AI 功能时的访问地址

### 2. GIST_shiny 配置文件

#### 2.1 环境配置文件
**文件**: `GIST_shiny/.env.no-ai`
- **行号**: 20
- **更改**: `APP_PORT=4965` → `APP_PORT=4967`

#### 2.2 启动脚本 (Windows)
**文件**: `GIST_shiny/start_without_ai.bat`
- **行号**: 4, 23
- **更改**: 
  - 显示信息：`端口: 4965` → `端口: 4967`
  - 启动命令：`port = 4965` → `port = 4967`

#### 2.3 启动脚本 (Linux/Mac)
**文件**: `GIST_shiny/start_without_ai.sh`
- **行号**: 5, 24
- **更改**:
  - 显示信息：`端口: 4965` → `端口: 4967`
  - 启动命令：`port = 4965` → `port = 4967`

### 3. 文档更新

#### 3.1 架构文档
**文件**: `GIST_shiny/DUAL_DOMAIN_ARCHITECTURE.md`
- **更改内容**:
  - 基础版本端口：`(端口4965)` → `(端口4967)`
  - 访问地址：`http://127.0.0.1:4965` → `http://127.0.0.1:4967`
  - 版本标签：`"基础版本 (4965)"` → `"基础版本 (4967)"`
  - 端口隔离：`(4964 vs 4966)` → `(4964 vs 4967)`

## 🔍 验证要点

### 已确认正确的文件：
- ✅ `GIST_shiny/start_no_ai.R` - 已使用端口 4967
- ✅ `GIST_shiny/ui.R` - 版本标识已使用端口 4967

### 端口分配总结：
- **AI 版本**: 端口 4964 (`http://127.0.0.1:4964/`)
- **基础版本**: 端口 4966 (`http://127.0.0.1:4966/`)
- **蛋白组学**: 端口 4965 (`http://localhost:4965`)

## 🚀 测试建议

1. **启动 AI 版本**:
   ```bash
   cd GIST_shiny
   Rscript start_ai.R
   ```
   访问: http://127.0.0.1:4964/

2. **启动基础版本**:
   ```bash
   cd GIST_shiny
   Rscript start_no_ai.R
   ```
   访问: http://127.0.0.1:4966/

3. **测试前端集成**:
   ```bash
   npm run dev
   ```
   在前端页面点击转录组学模块，确认：
   - AI 启用时跳转到 4964 端口
   - AI 关闭时跳转到 4966 端口

## ✨ 更改完成
所有相关文件已成功恢复，关闭 AI 功能的转录组域名现在使用 `http://127.0.0.1:4966/`
