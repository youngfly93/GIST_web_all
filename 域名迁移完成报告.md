# ğŸ‰ DBGist åŸŸåè¿ç§»å®ŒæˆæŠ¥å‘Š

**è¿ç§»æ—¶é—´ï¼š** 2025å¹´10æœˆ10æ—¥  
**æ“ä½œäººå‘˜ï¼š** AI Assistant

---

## âœ… è¿ç§»ç»“æœ

### åŸŸåä¿¡æ¯
- **åŸåŸŸåï¼š** http://chatgist.online:81/
- **æ–°åŸŸåï¼š** https://www.dbgist.com
- **å¤‡ç”¨åŸŸåï¼š** https://dbgist.com

### æœåŠ¡å™¨ä¿¡æ¯
- **å…¬ç½‘IPï¼š** 117.72.75.45
- **æ“ä½œç³»ç»Ÿï¼š** Linux (Ubuntu)
- **WebæœåŠ¡å™¨ï¼š** Nginx 1.18.0

---

## ğŸ” SSL è¯ä¹¦ä¿¡æ¯

| é¡¹ç›® | è¯¦æƒ… |
|-----|------|
| **è¯ä¹¦æä¾›å•†** | Let's Encrypt |
| **è¯ä¹¦ç±»å‹** | RSA |
| **è¦†ç›–åŸŸå** | dbgist.com, www.dbgist.com |
| **é¢å‘æ—¥æœŸ** | 2025-10-10 |
| **åˆ°æœŸæ—¥æœŸ** | 2026-01-08 (90å¤©æœ‰æ•ˆæœŸ) |
| **å‰©ä½™å¤©æ•°** | 89å¤© |
| **è‡ªåŠ¨ç»­æœŸ** | âœ… å·²é…ç½®ï¼ˆæ¯æœˆ1å·å‡Œæ™¨3ç‚¹ï¼‰ |
| **è¯ä¹¦è·¯å¾„** | /etc/letsencrypt/live/dbgist.com/fullchain.pem |
| **ç§é’¥è·¯å¾„** | /etc/letsencrypt/live/dbgist.com/privkey.pem |

---

## ğŸŒ è®¿é—®åœ°å€

### ä¸»è¦è®¿é—®åœ°å€
- **HTTPSï¼ˆæ¨èï¼‰ï¼š** https://www.dbgist.com âœ¨
- **å¤‡ç”¨åœ°å€ï¼š** https://dbgist.com âœ¨

### HTTP è®¿é—®
- HTTP è®¿é—®ä¼šè‡ªåŠ¨è·³è½¬åˆ° HTTPSï¼ˆ301é‡å®šå‘ï¼‰
- http://www.dbgist.com â†’ https://www.dbgist.com
- http://dbgist.com â†’ https://dbgist.com

---

## ğŸ“Š æœåŠ¡çŠ¶æ€

### ç«¯å£ç›‘å¬çŠ¶æ€
| ç«¯å£ | æœåŠ¡ | çŠ¶æ€ |
|-----|------|------|
| 80 | HTTP (è‡ªåŠ¨è·³è½¬) | âœ… æ­£å¸¸ |
| 443 | HTTPS | âœ… æ­£å¸¸ |
| 5173 | å‰ç«¯æœåŠ¡ (Vite) | âœ… æ­£å¸¸ |
| 8000 | åç«¯API | âœ… æ­£å¸¸ |
| 4964 | Shiny - è½¬å½•ç»„å­¦ | âœ… æ­£å¸¸ |
| 4968 | Shiny - è›‹ç™½è´¨ç»„å­¦ | âœ… æ­£å¸¸ |
| 4971 | Shiny - ç¿»è¯‘åä¿®é¥°(åŸºç¡€) | âœ… æ­£å¸¸ |
| 4972 | Shiny - ç¿»è¯‘åä¿®é¥° | âœ… æ­£å¸¸ |
| 4974 | Shiny - å•ç»†èƒ | âœ… æ­£å¸¸ |

### è·¯ç”±æ˜ å°„
| å¤–éƒ¨è®¿é—®è·¯å¾„ | å†…éƒ¨æœåŠ¡ |
|-------------|---------|
| / | å‰ç«¯æœåŠ¡ (127.0.0.1:5173) |
| /api/ | åç«¯API (127.0.0.1:8000) |
| /transcriptomics/ | Shiny è½¬å½•ç»„å­¦ (127.0.0.1:4964) |
| /transcriptomics-basic/ | Shiny è½¬å½•ç»„å­¦-åŸºç¡€ç‰ˆ (127.0.0.1:4964?ai=0) |
| /proteomics/ | Shiny è›‹ç™½è´¨ç»„å­¦ (127.0.0.1:4968) |
| /proteomics-basic/ | Shiny è›‹ç™½è´¨ç»„å­¦-åŸºç¡€ç‰ˆ (127.0.0.1:4968?ai=0) |
| /posttranslational/ | Shiny ç¿»è¯‘åä¿®é¥° (127.0.0.1:4972) |
| /posttranslational-basic/ | Shiny ç¿»è¯‘åä¿®é¥°-åŸºç¡€ç‰ˆ (127.0.0.1:4971) |
| /singlecell/ | Shiny å•ç»†èƒ (127.0.0.1:4974) |
| /singlecell-basic/ | Shiny å•ç»†èƒ-åŸºç¡€ç‰ˆ (127.0.0.1:4974?ai=0) |

---

## ğŸ“ é…ç½®æ–‡ä»¶

### Nginx é…ç½®
- **æ´»åŠ¨é…ç½®ï¼š** /etc/nginx/sites-enabled/dbgist
- **é…ç½®æ–‡ä»¶æºï¼š** /home/ylab/GIST_web_all/dbgist_https.conf
- **æ—§é…ç½®å¤‡ä»½ï¼š** /etc/nginx/sites-available/chatgist-port81.backup

### å‰ç«¯é…ç½®
- **é…ç½®æ–‡ä»¶ï¼š** /home/ylab/GIST_web_all/frontend/vite.config.ts
- **å…è®¸çš„åŸŸåï¼š**
  - chatgist.online
  - www.chatgist.online
  - dbgist.com
  - www.dbgist.com
  - localhost
  - 127.0.0.1

### SSL è¯ä¹¦
- **Nginx è¯ä¹¦ï¼š** /etc/nginx/ssl/dbgist.com.crt
- **Nginx ç§é’¥ï¼š** /etc/nginx/ssl/dbgist.com.key
- **åŸå§‹è¯ä¹¦ï¼š** /etc/letsencrypt/live/dbgist.com/

---

## ğŸ”„ è‡ªåŠ¨åŒ–ä»»åŠ¡

### è¯ä¹¦ç»­æœŸ
- **ç»­æœŸè„šæœ¬ï¼š** /usr/local/bin/renew_dbgist_ssl.sh
- **æ‰§è¡Œæ—¶é—´ï¼š** æ¯æœˆ1å·å‡Œæ™¨3ç‚¹
- **Crontab é…ç½®ï¼š** `0 3 1 * * /usr/local/bin/renew_dbgist_ssl.sh`
- **æ—¥å¿—æ–‡ä»¶ï¼š** /var/log/dbgist_ssl_renew.log

### ç»­æœŸæµç¨‹
1. åœæ­¢ Nginx
2. ä½¿ç”¨ Certbot ç»­æœŸè¯ä¹¦
3. æ›´æ–°è¯ä¹¦æ–‡ä»¶åˆ° Nginx ç›®å½•
4. é‡å¯ Nginx
5. è®°å½•æ—¥å¿—

---

## ğŸ”§ ç»´æŠ¤æ“ä½œ

### æŸ¥çœ‹è¯ä¹¦çŠ¶æ€
```bash
sudo certbot certificates
```

### æ‰‹åŠ¨ç»­æœŸè¯ä¹¦
```bash
sudo /usr/local/bin/renew_dbgist_ssl.sh
```

### é‡å¯ Nginx
```bash
sudo systemctl restart nginx
```

### æŸ¥çœ‹ Nginx æ—¥å¿—
```bash
# é”™è¯¯æ—¥å¿—
sudo tail -f /var/log/nginx/error.log

# è®¿é—®æ—¥å¿—
sudo tail -f /var/log/nginx/access.log
```

### é‡å¯å‰ç«¯æœåŠ¡
```bash
cd /home/ylab/GIST_web_all/frontend
npm run dev
```

### é‡å¯åç«¯æœåŠ¡
```bash
cd /home/ylab/GIST_web_all/backend
npm start
```

---

## ğŸ”™ å›æ»šæ“ä½œ

å¦‚éœ€å›æ»šåˆ°åŸ81ç«¯å£é…ç½®ï¼š

```bash
# 1. ç¦ç”¨æ–°åŸŸåé…ç½®
sudo rm /etc/nginx/sites-enabled/dbgist

# 2. æ¢å¤81ç«¯å£é…ç½®
sudo ln -sf /etc/nginx/sites-available/chatgist-port81.backup /etc/nginx/sites-enabled/chatgist-port81

# 3. æµ‹è¯•é…ç½®
sudo nginx -t

# 4. é‡è½½ Nginx
sudo systemctl reload nginx
```

---

## âœ¨ è¿ç§»ä¼˜åŠ¿

### å®‰å…¨æ€§æå‡
- âœ… HTTPS åŠ å¯†ä¼ è¾“ï¼Œä¿æŠ¤ç”¨æˆ·æ•°æ®
- âœ… SSL/TLS 1.2 å’Œ 1.3 æ”¯æŒ
- âœ… ç°ä»£åŒ–åŠ å¯†å¥—ä»¶
- âœ… HSTS å®‰å…¨å¤´é…ç½®

### ç”¨æˆ·ä½“éªŒæ”¹å–„
- âœ… æ ‡å‡† 80/443 ç«¯å£ï¼Œæ— éœ€æŒ‡å®šç«¯å£å·
- âœ… HTTP/2 åè®®æ”¯æŒï¼ŒåŠ è½½æ›´å¿«
- âœ… æµè§ˆå™¨æ˜¾ç¤ºå®‰å…¨é”æ ‡è¯†
- âœ… æ›´ä¸“ä¸šçš„åŸŸåå±•ç¤º

### SEO ä¼˜åŠ¿
- âœ… HTTPS æ˜¯ Google æ’åå› ç´ 
- âœ… æ›´å®¹æ˜“è¢«æœç´¢å¼•æ“æ”¶å½•
- âœ… æå‡ç½‘ç«™å¯ä¿¡åº¦

### è¿ç»´ä¾¿åˆ©
- âœ… SSL è¯ä¹¦è‡ªåŠ¨ç»­æœŸï¼Œæ— éœ€æ‰‹åŠ¨ç»´æŠ¤
- âœ… å®Œæ•´çš„ç›‘æ§å’Œæ—¥å¿—ç³»ç»Ÿ
- âœ… å¯éšæ—¶å›æ»šåˆ°åŸé…ç½®
- âœ… æ¸…æ™°çš„æ–‡æ¡£å’Œæ“ä½œæŒ‡å—

---

## ğŸ“ æ•…éšœå¤„ç†

### é—®é¢˜1ï¼šåŸŸåæ— æ³•è®¿é—®
**æ£€æŸ¥æ­¥éª¤ï¼š**
1. æ£€æŸ¥ DNS è§£æï¼š`ping www.dbgist.com`
2. æ£€æŸ¥ Nginx çŠ¶æ€ï¼š`sudo systemctl status nginx`
3. æ£€æŸ¥ç«¯å£ç›‘å¬ï¼š`ss -tlnp | grep -E ":(80|443)"`
4. æŸ¥çœ‹é”™è¯¯æ—¥å¿—ï¼š`sudo tail -f /var/log/nginx/error.log`

### é—®é¢˜2ï¼šSSL è¯ä¹¦é”™è¯¯
**æ£€æŸ¥æ­¥éª¤ï¼š**
1. æ£€æŸ¥è¯ä¹¦æœ‰æ•ˆæœŸï¼š`sudo certbot certificates`
2. æ‰‹åŠ¨ç»­æœŸï¼š`sudo certbot renew`
3. é‡å¯ Nginxï¼š`sudo systemctl restart nginx`
4. æŸ¥çœ‹ç»­æœŸæ—¥å¿—ï¼š`sudo cat /var/log/dbgist_ssl_renew.log`

### é—®é¢˜3ï¼šæœåŠ¡å†…éƒ¨é”™è¯¯
**æ£€æŸ¥æ­¥éª¤ï¼š**
1. æ£€æŸ¥å‰ç«¯æœåŠ¡ï¼š`curl http://127.0.0.1:5173`
2. æ£€æŸ¥åç«¯æœåŠ¡ï¼š`curl http://127.0.0.1:8000/health`
3. é‡å¯ç›¸åº”æœåŠ¡
4. æŸ¥çœ‹åº”ç”¨æ—¥å¿—

### é—®é¢˜4ï¼š403 Forbidden
**è§£å†³æ–¹æ¡ˆï¼š**
- æ£€æŸ¥ Vite é…ç½®ä¸­çš„ `allowedHosts`
- ç¡®ä¿æ–°åŸŸåå·²æ·»åŠ åˆ°å…è®¸åˆ—è¡¨
- é‡å¯å‰ç«¯æœåŠ¡

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- **å®Œæ•´è¿ç§»æŒ‡å—ï¼š** DOMAIN_MIGRATION_GUIDE.md
- **å¿«é€ŸæŒ‡å—ï¼š** è¿ç§»å¿«é€ŸæŒ‡å—.md
- **é…ç½®æ–‡ä»¶ï¼š**
  - dbgist.conf (HTTP)
  - dbgist_https.conf (HTTPS)
- **è„šæœ¬æ–‡ä»¶ï¼š**
  - setup_dbgist_domain.sh (åŸŸåé…ç½®)
  - setup_dbgist_ssl.sh (SSLé…ç½®)

---

## ğŸ¯ è¿ç§»å®Œæˆæ£€æŸ¥æ¸…å•

- [x] äº¬ä¸œäº‘ DNS A è®°å½•é…ç½®å®Œæˆ
- [x] DNS è§£æéªŒè¯é€šè¿‡ (117.72.75.45)
- [x] Nginx é…ç½®æ–‡ä»¶éƒ¨ç½²å®Œæˆ
- [x] HTTP è®¿é—®æµ‹è¯•é€šè¿‡ (200 OK)
- [x] å‰ç«¯æœåŠ¡æ­£å¸¸è¿è¡Œ (5173)
- [x] åç«¯æœåŠ¡æ­£å¸¸è¿è¡Œ (8000)
- [x] Shiny åº”ç”¨æ­£å¸¸è¿è¡Œ
- [x] SSL è¯ä¹¦ç”³è¯·æˆåŠŸ
- [x] HTTPS è®¿é—®æµ‹è¯•é€šè¿‡ (HTTP/2 200)
- [x] HTTP è‡ªåŠ¨è·³è½¬ HTTPS (301)
- [x] è¯ä¹¦è‡ªåŠ¨ç»­æœŸé…ç½®å®Œæˆ
- [x] åŸé…ç½®å·²å¤‡ä»½
- [x] æ‰€æœ‰åŠŸèƒ½æµ‹è¯•é€šè¿‡

---

## ğŸŠ æ€»ç»“

âœ… **åŸŸåè¿ç§»åœ†æ»¡å®Œæˆï¼**

æ‚¨çš„ GIST Web é¡¹ç›®å·²æˆåŠŸä» `http://chatgist.online:81/` è¿ç§»åˆ° `https://www.dbgist.com`ã€‚

**ä¸»è¦æˆæœï¼š**
- âœ… è·å¾—äº†æ›´ä¸“ä¸šçš„åŸŸå
- âœ… å¯ç”¨äº† HTTPS å®‰å…¨è®¿é—®
- âœ… æ‰€æœ‰åŠŸèƒ½ä¿æŒå®Œæ•´
- âœ… é…ç½®äº†è‡ªåŠ¨åŒ–è¿ç»´
- âœ… ä¿ç•™äº†å›æ»šèƒ½åŠ›

**ç°åœ¨æ‚¨å¯ä»¥ï¼š**
1. é€šè¿‡ https://www.dbgist.com è®¿é—®æ‚¨çš„é¡¹ç›®
2. å‘ç”¨æˆ·æ¨å¹¿æ–°åŸŸå
3. äº«å—æ›´å®‰å…¨ã€æ›´ä¸“ä¸šçš„æœåŠ¡
4. æ— éœ€æ‹…å¿ƒè¯ä¹¦è¿‡æœŸï¼ˆå·²è‡ªåŠ¨ç»­æœŸï¼‰

---

**æŠ¥å‘Šç”Ÿæˆæ—¶é—´ï¼š** 2025-10-10  
**æ“ä½œçŠ¶æ€ï¼š** âœ… å…¨éƒ¨æˆåŠŸ  
**é¡¹ç›®çŠ¶æ€ï¼š** ğŸŸ¢ è¿è¡Œæ­£å¸¸




